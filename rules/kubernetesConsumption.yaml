- version: 1.0.0
  date: 07-18-2023
  alert:
    fatal:
      enabled: true
      type: 
        - log
        #- email
      to: 
        - myEmail@gmail.com
    error:
      enabled: true
      type: 
        - log
        #- email
      to: 
        - myEmail@gmail.com
    warning:
      enabled: true
      type: 
        - log
        #- email
      to:
        - myEmail@gmail.com
    info:
      enabled: true
      type: 
        - log
        #- email
      to: 
        - myEmail@gmail.com
    global:
      enabled: true
      type: 
        - log
      #  - email
      to: 
        - myEmail@gmail.com
      conditions:
        - level: 0
          min: 1
        - level: 1
          min: 1
        - level: 2
          min: 1
        - level: 3
          min: 1
  rules:
    # this is an example of pod autoscaler rule
    - name: "kube-hozizontal-pod-autoscaler-min-max-replicas"
      description : "this rules is to verify horizontal pod autoscaler min and max replicas"
      applied: false
      level: 1
      cloudProvider: kubernetes
      objectName : hpa
      conditions:
        - property : spec.minReplicas
          condition : SUP_OR_EQUAL
          value: 1
        - property : spec.maxReplicas
          condition : INF_OR_EQUAL
          value: 2
    #########################
    #    PODS CONSUMPTION   #
    #########################
    # pods memory % consumption alert
    - name: "kube-pods-memory-limitation"
      description : "this rules is to verify pods memory limitation"
      applied: true
      level: 1
      cloudProvider: kubernetes
      objectName : podsConsumption
      conditions:
        - property : MemoryUsage
          condition : INF
          value: 599428096
    # pods CPU % consumption alert
    - name: "kube-pods-cpu-limitation"
      description : "this rules is to verify cpu usage limitation"
      applied: true
      level: 1
      cloudProvider: kubernetes
      objectName : podsConsumption
      conditions:
        - property : CPUUsage
          condition : INF
          value: 0.02
    - name: "kube-pods-cpu-limit-request-set"
      description : "this rules is to verify cpu limit and request are set"
      applied: true
      level: 1
      cloudProvider: kubernetes
      objectName : podsConsumption
      conditions:
        - property : MemoryLimitTotal
          condition : DIFFERENT
          value: 0
        - property : MemoryRequestTotal
          condition : DIFFERENT
          value: 0
    - name: "kube-pods-memory-limit-request-set"
      description : "this rules is to verify memory limit and request are set"
      applied: true
      level: 1
      cloudProvider: kubernetes
      objectName : podsConsumption
      conditions:
        - property : CPULimitTotal
          condition : DIFFERENT
          value: 0
        - property : CPURequestTotal
          condition : DIFFERENT
          value: 0

    - name: "kube-pod-not-scheduled"
      description : "this rules is to check if pod is ready"
      applied: false
      level: 1
      cloudProvider: kubernetes
      objectName : pods
      conditions:
        - property : status.formattedConditions.PodScheduled.status
          condition : EQUAL
          value: 'True'

    - name: "kube-node-memory-pressure"
      description : "this rules is to check kubelet has sufficient memory available"
      applied: false
      level: 1
      cloudProvider: kubernetes
      objectName : node
      conditions:
        - property: status.formattedConditions.MemoryPressure.status
          condition : EQUAL
          value: 'False'
    - name: "kube-node-disk-pressure"
      description : "this rules is to check if there is disk pressure"
      applied: false
      level: 1
      cloudProvider: kubernetes
      objectName : node
      conditions:
        - property: status.formattedConditions.DiskPressure.status
          condition : EQUAL
          value: 'False'